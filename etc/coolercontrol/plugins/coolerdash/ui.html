<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoolerDash - LCD Temperature Dashboard</title>
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f3460;
            --accent: #e94560;
            --accent-hover: #ff6b8a;
            --text-primary: #eaeaea;
            --text-secondary: #a0a0a0;
            --success: #00d26a;
            --warning: #ffb300;
            --error: #ff4757;
            --border: #2d4263;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        header {
            text-align: center;
            padding: 40px 20px;
            background: var(--bg-card);
            border-radius: 16px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        
        .logo {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--accent), #ff9a9e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .version {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        .description {
            color: var(--text-secondary);
            margin-top: 15px;
            font-size: 1.1rem;
        }
        
        /* Status Bar */
        .status-bar {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        
        .status-card {
            flex: 1;
            min-width: 200px;
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        
        .status-card h3 {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .status-value {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .status-active { color: var(--success); }
        .status-inactive { color: var(--error); }
        .status-warning { color: var(--warning); }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .tab:hover {
            background: var(--border);
            color: var(--text-primary);
        }
        
        .tab.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        /* Config Editor */
        .config-panel {
            background: var(--bg-card);
            border-radius: 16px;
            border: 1px solid var(--border);
            overflow: hidden;
        }
        
        .config-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .config-header h2 {
            font-size: 1.3rem;
        }
        
        .config-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--border);
            color: var(--text-primary);
        }
        
        .btn-secondary:hover {
            background: #3d5278;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #00b85c;
        }
        
        /* Config Sections */
        .config-sections {
            display: none;
            padding: 20px;
        }
        
        .config-sections.active {
            display: block;
        }
        
        .config-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent);
        }
        
        .section-icon {
            font-size: 1.3rem;
        }
        
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }
        
        .config-item {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
        }
        
        .config-item label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .config-item input,
        .config-item select {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 1rem;
        }
        
        .config-item input:focus,
        .config-item select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.2);
        }
        
        .config-item input[type="color"] {
            height: 45px;
            padding: 5px;
            cursor: pointer;
        }
        
        .config-item input[type="range"] {
            cursor: pointer;
        }
        
        .range-value {
            text-align: center;
            font-weight: 600;
            color: var(--accent);
            margin-top: 5px;
        }
        
        /* Color Preview */
        .color-preview {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid var(--border);
        }
        
        .color-inputs {
            display: flex;
            gap: 8px;
            flex: 1;
        }
        
        .color-inputs input {
            width: 60px;
            text-align: center;
        }
        
        /* Info Panel */
        .info-panel {
            display: none;
            padding: 20px;
        }
        
        .info-panel.active {
            display: block;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .info-card {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        
        .info-card h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .info-card ul {
            list-style: none;
        }
        
        .info-card li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
        }
        
        .info-card li:last-child {
            border-bottom: none;
        }
        
        .info-card a {
            color: var(--accent);
            text-decoration: none;
        }
        
        .info-card a:hover {
            text-decoration: underline;
        }
        
        /* Command Box */
        .command-box {
            margin-top: 20px;
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
        }
        
        .command-box h4 {
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .command-code {
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            background: #0d1117;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            position: relative;
        }
        
        .command-code code {
            color: var(--success);
        }
        
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            font-size: 0.8rem;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--bg-card);
            padding: 15px 25px;
            border-radius: 10px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .toast.success { border-left: 4px solid var(--success); }
        .toast.error { border-left: 4px solid var(--error); }
        .toast.warning { border-left: 4px solid var(--warning); }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-overlay.show {
            display: flex;
        }
        
        .modal {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            border: 1px solid var(--border);
        }
        
        .modal h3 {
            margin-bottom: 15px;
        }
        
        .modal p {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            margin-top: 40px;
        }
        
        footer a {
            color: var(--accent);
            text-decoration: none;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .logo { font-size: 2rem; }
            .config-grid { grid-template-columns: 1fr; }
            .tabs { justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">üå°Ô∏è</div>
            <h1>CoolerDash</h1>
            <span class="version" id="version">v2.0.4</span>
            <p class="description">Enhanced LCD Dashboard for AIO Liquid Coolers</p>
        </header>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-card">
                <h3>Service Status</h3>
                <div class="status-value status-active" id="service-status">‚óè Running</div>
            </div>
            <div class="status-card">
                <h3>Display Mode</h3>
                <div class="status-value" id="display-mode">Dual</div>
            </div>
            <div class="status-card">
                <h3>Refresh Rate</h3>
                <div class="status-value" id="refresh-rate">2.5s</div>
            </div>
            <div class="status-card">
                <h3>LCD Brightness</h3>
                <div class="status-value" id="brightness-value">80%</div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="config">‚öôÔ∏è Configuration</button>
            <button class="tab" data-tab="colors">üé® Colors</button>
            <button class="tab" data-tab="info">‚ÑπÔ∏è Info & Help</button>
        </div>

        <!-- Config Panel -->
        <div class="config-panel">
            <div class="config-header">
                <h2>‚öôÔ∏è Configuration Editor</h2>
                <div class="config-actions">
                    <button class="btn btn-secondary" onclick="resetConfig()">‚Ü∫ Reset</button>
                    <button class="btn btn-primary" onclick="saveConfig()">üíæ Save Changes</button>
                    <button class="btn btn-success" onclick="showRestartModal()">üîÑ Apply & Restart</button>
                </div>
            </div>

            <!-- Config Tab -->
            <div class="config-sections active" id="config-tab">
                <!-- Daemon Section -->
                <div class="config-section">
                    <div class="section-title">
                        <span class="section-icon">üåê</span>
                        Daemon Settings
                    </div>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>CoolerControl API Address</label>
                            <input type="text" id="daemon-address" value="http://localhost:11987" placeholder="http://localhost:11987">
                        </div>
                        <div class="config-item">
                            <label>API Password</label>
                            <input type="password" id="daemon-password" value="" placeholder="coolAdmin">
                        </div>
                    </div>
                </div>

                <!-- Display Section -->
                <div class="config-section">
                    <div class="section-title">
                        <span class="section-icon">üñ•Ô∏è</span>
                        Display Settings
                    </div>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>Display Mode</label>
                            <select id="display-mode-select">
                                <option value="dual">Dual (CPU + GPU)</option>
                                <option value="circle">Circle (Alternating)</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label>Circle Switch Interval (seconds)</label>
                            <input type="number" id="circle-interval" value="5" min="1" max="60">
                        </div>
                        <div class="config-item">
                            <label>Refresh Interval (seconds)</label>
                            <input type="number" id="refresh-interval" value="2.5" min="0.01" max="60" step="0.1">
                        </div>
                        <div class="config-item">
                            <label>LCD Brightness (%)</label>
                            <input type="range" id="brightness" value="80" min="0" max="100">
                            <div class="range-value" id="brightness-display">80%</div>
                        </div>
                        <div class="config-item">
                            <label>Orientation (degrees)</label>
                            <select id="orientation">
                                <option value="0">0¬∞</option>
                                <option value="90">90¬∞</option>
                                <option value="180">180¬∞</option>
                                <option value="270">270¬∞</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label>Display Shape</label>
                            <select id="display-shape">
                                <option value="auto">Auto Detect</option>
                                <option value="rectangular">Rectangular</option>
                                <option value="circular">Circular</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label>Width (pixels)</label>
                            <input type="number" id="width" value="240" min="100" max="800">
                        </div>
                        <div class="config-item">
                            <label>Height (pixels)</label>
                            <input type="number" id="height" value="240" min="100" max="800">
                        </div>
                    </div>
                </div>

                <!-- Layout Section -->
                <div class="config-section">
                    <div class="section-title">
                        <span class="section-icon">üìê</span>
                        Layout Settings
                    </div>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>Bar Height (pixels)</label>
                            <input type="number" id="bar-height" value="24" min="1" max="100">
                        </div>
                        <div class="config-item">
                            <label>Bar Width (%)</label>
                            <input type="number" id="bar-width" value="98" min="1" max="100">
                        </div>
                        <div class="config-item">
                            <label>Bar Gap (pixels)</label>
                            <input type="number" id="bar-gap" value="12" min="0" max="50">
                        </div>
                        <div class="config-item">
                            <label>Bar Border (pixels)</label>
                            <input type="number" id="bar-border" value="2.0" min="0" max="10" step="0.5">
                        </div>
                    </div>
                </div>

                <!-- Font Section -->
                <div class="config-section">
                    <div class="section-title">
                        <span class="section-icon">üî§</span>
                        Font Settings
                    </div>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>Font Face</label>
                            <input type="text" id="font-face" value="Roboto Black" placeholder="Roboto Black">
                        </div>
                        <div class="config-item">
                            <label>Temperature Font Size (pt)</label>
                            <input type="number" id="font-size-temp" value="100" min="10" max="200">
                        </div>
                        <div class="config-item">
                            <label>Label Font Size (pt)</label>
                            <input type="number" id="font-size-label" value="30" min="8" max="100">
                        </div>
                    </div>
                </div>

                <!-- Temperature Thresholds -->
                <div class="config-section">
                    <div class="section-title">
                        <span class="section-icon">üå°Ô∏è</span>
                        Temperature Thresholds (¬∞C)
                    </div>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>Threshold 1 - Cool ‚Üí Warm</label>
                            <input type="number" id="temp-threshold-1" value="55" min="0" max="100">
                        </div>
                        <div class="config-item">
                            <label>Threshold 2 - Warm ‚Üí Hot</label>
                            <input type="number" id="temp-threshold-2" value="65" min="0" max="100">
                        </div>
                        <div class="config-item">
                            <label>Threshold 3 - Hot ‚Üí Critical</label>
                            <input type="number" id="temp-threshold-3" value="75" min="0" max="100">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Colors Tab -->
            <div class="config-sections" id="colors-tab">
                <!-- Temperature Colors -->
                <div class="config-section">
                    <div class="section-title">
                        <span class="section-icon">üå°Ô∏è</span>
                        Temperature Bar Colors
                    </div>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>üíö Cool (< Threshold 1)</label>
                            <div class="color-preview">
                                <div class="color-swatch" id="swatch-cool" style="background: rgb(0,255,0);"></div>
                                <div class="color-inputs">
                                    <input type="number" id="temp1-r" value="0" min="0" max="255" placeholder="R">
                                    <input type="number" id="temp1-g" value="255" min="0" max="255" placeholder="G">
                                    <input type="number" id="temp1-b" value="0" min="0" max="255" placeholder="B">
                                </div>
                            </div>
                        </div>
                        <div class="config-item">
                            <label>üß° Warm (Threshold 1-2)</label>
                            <div class="color-preview">
                                <div class="color-swatch" id="swatch-warm" style="background: rgb(255,140,0);"></div>
                                <div class="color-inputs">
                                    <input type="number" id="temp2-r" value="255" min="0" max="255" placeholder="R">
                                    <input type="number" id="temp2-g" value="140" min="0" max="255" placeholder="G">
                                    <input type="number" id="temp2-b" value="0" min="0" max="255" placeholder="B">
                                </div>
                            </div>
                        </div>
                        <div class="config-item">
                            <label>üî• Hot (Threshold 2-3)</label>
                            <div class="color-preview">
                                <div class="color-swatch" id="swatch-hot" style="background: rgb(255,70,0);"></div>
                                <div class="color-inputs">
                                    <input type="number" id="temp3-r" value="255" min="0" max="255" placeholder="R">
                                    <input type="number" id="temp3-g" value="70" min="0" max="255" placeholder="G">
                                    <input type="number" id="temp3-b" value="0" min="0" max="255" placeholder="B">
                                </div>
                            </div>
                        </div>
                        <div class="config-item">
                            <label>üö® Critical (> Threshold 3)</label>
                            <div class="color-preview">
                                <div class="color-swatch" id="swatch-critical" style="background: rgb(255,0,0);"></div>
                                <div class="color-inputs">
                                    <input type="number" id="temp4-r" value="255" min="0" max="255" placeholder="R">
                                    <input type="number" id="temp4-g" value="0" min="0" max="255" placeholder="G">
                                    <input type="number" id="temp4-b" value="0" min="0" max="255" placeholder="B">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- UI Colors -->
                <div class="config-section">
                    <div class="section-title">
                        <span class="section-icon">üé®</span>
                        UI Colors
                    </div>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>Bar Background</label>
                            <div class="color-preview">
                                <div class="color-swatch" id="swatch-bar-bg" style="background: rgb(52,52,52);"></div>
                                <div class="color-inputs">
                                    <input type="number" id="bar-bg-r" value="52" min="0" max="255" placeholder="R">
                                    <input type="number" id="bar-bg-g" value="52" min="0" max="255" placeholder="G">
                                    <input type="number" id="bar-bg-b" value="52" min="0" max="255" placeholder="B">
                                </div>
                            </div>
                        </div>
                        <div class="config-item">
                            <label>Bar Border</label>
                            <div class="color-preview">
                                <div class="color-swatch" id="swatch-bar-border" style="background: rgb(192,192,192);"></div>
                                <div class="color-inputs">
                                    <input type="number" id="bar-border-r" value="192" min="0" max="255" placeholder="R">
                                    <input type="number" id="bar-border-g" value="192" min="0" max="255" placeholder="G">
                                    <input type="number" id="bar-border-b" value="192" min="0" max="255" placeholder="B">
                                </div>
                            </div>
                        </div>
                        <div class="config-item">
                            <label>Temperature Text</label>
                            <div class="color-preview">
                                <div class="color-swatch" id="swatch-temp-text" style="background: rgb(255,255,255);"></div>
                                <div class="color-inputs">
                                    <input type="number" id="font-temp-r" value="255" min="0" max="255" placeholder="R">
                                    <input type="number" id="font-temp-g" value="255" min="0" max="255" placeholder="G">
                                    <input type="number" id="font-temp-b" value="255" min="0" max="255" placeholder="B">
                                </div>
                            </div>
                        </div>
                        <div class="config-item">
                            <label>Label Text</label>
                            <div class="color-preview">
                                <div class="color-swatch" id="swatch-label-text" style="background: rgb(200,200,200);"></div>
                                <div class="color-inputs">
                                    <input type="number" id="font-label-r" value="200" min="0" max="255" placeholder="R">
                                    <input type="number" id="font-label-g" value="200" min="0" max="255" placeholder="G">
                                    <input type="number" id="font-label-b" value="200" min="0" max="255" placeholder="B">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Info Tab -->
            <div class="info-panel" id="info-tab">
                <div class="info-grid">
                    <div class="info-card">
                        <h3>üì¶ Project Info</h3>
                        <ul>
                            <li><span>Name</span><span>CoolerDash</span></li>
                            <li><span>Version</span><span id="info-version">2.0.4</span></li>
                            <li><span>Author</span><span>damachine</span></li>
                            <li><span>License</span><span>MIT</span></li>
                            <li><span>Language</span><span>C99</span></li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>üîó Links</h3>
                        <ul>
                            <li><span>GitHub</span><a href="https://github.com/damachine/coolerdash" target="_blank">Repository</a></li>
                            <li><span>Issues</span><a href="https://github.com/damachine/coolerdash/issues" target="_blank">Report Bug</a></li>
                            <li><span>Docs</span><a href="https://github.com/damachine/coolerdash/blob/master/docs/config-guide.md" target="_blank">Config Guide</a></li>
                            <li><span>Changelog</span><a href="https://github.com/damachine/coolerdash/blob/master/CHANGELOG.md" target="_blank">View Changes</a></li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>‚öôÔ∏è Dependencies</h3>
                        <ul>
                            <li><span>Cairo</span><span>2D Graphics</span></li>
                            <li><span>libcurl</span><span>HTTP Client</span></li>
                            <li><span>jansson</span><span>JSON Parser</span></li>
                            <li><span>libinih</span><span>INI Parser</span></li>
                            <li><span>Roboto Font</span><span>LCD Rendering</span></li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>üìÅ File Locations</h3>
                        <ul>
                            <li><span>Binary</span><span style="font-size:0.8rem">/etc/coolercontrol/plugins/coolerdash/</span></li>
                            <li><span>Config</span><span style="font-size:0.8rem">/etc/coolercontrol/plugins/coolerdash/config.ini</span></li>
                            <li><span>Images</span><span style="font-size:0.8rem">/etc/coolercontrol/plugins/coolerdash/</span></li>
                        </ul>
                    </div>
                </div>

                <div class="command-box">
                    <h4>üîß Service Management Commands</h4>
                    <div class="command-code">
                        <code id="restart-cmd">sudo systemctl restart cc-plugin-coolerdash.service</code>
                        <button class="btn btn-secondary copy-btn" onclick="copyCommand('restart-cmd')">üìã Copy</button>
                    </div>
                </div>

                <div class="command-box">
                    <h4>üìä View Logs</h4>
                    <div class="command-code">
                        <code id="logs-cmd">journalctl -u cc-plugin-coolerdash.service -f</code>
                        <button class="btn btn-secondary copy-btn" onclick="copyCommand('logs-cmd')">üìã Copy</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>CoolerDash ¬© 2025 <a href="https://github.com/damachine">damachine</a> | MIT License</p>
            <p>Enhanced LCD Dashboard for AIO Liquid Coolers via CoolerControl</p>
        </footer>
    </div>

    <!-- Restart Modal -->
    <div class="modal-overlay" id="restart-modal">
        <div class="modal">
            <h3>üîÑ Apply & Restart Service</h3>
            <p>To apply your configuration changes, the CoolerDash service needs to be restarted. Run this command in your terminal:</p>
            <div class="command-code" style="margin-bottom: 20px;">
                <code>sudo systemctl restart cc-plugin-coolerdash.service</code>
            </div>
            <p style="font-size: 0.9rem; color: var(--text-secondary);">
                Note: This UI cannot directly restart system services for security reasons. 
                Please run the command manually or use CoolerControl's plugin management.
            </p>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="hideRestartModal()">Close</button>
                <button class="btn btn-primary" onclick="copyRestartCommand()">üìã Copy Command</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const tabId = tab.dataset.tab;
                document.querySelectorAll('.config-sections, .info-panel').forEach(panel => {
                    panel.classList.remove('active');
                });
                document.getElementById(tabId + '-tab').classList.add('active');
            });
        });

        // Brightness slider
        const brightnessSlider = document.getElementById('brightness');
        const brightnessDisplay = document.getElementById('brightness-display');
        brightnessSlider.addEventListener('input', () => {
            brightnessDisplay.textContent = brightnessSlider.value + '%';
            document.getElementById('brightness-value').textContent = brightnessSlider.value + '%';
        });

        // Color swatch updates
        function updateColorSwatch(swatchId, rId, gId, bId) {
            const r = document.getElementById(rId).value;
            const g = document.getElementById(gId).value;
            const b = document.getElementById(bId).value;
            document.getElementById(swatchId).style.background = `rgb(${r},${g},${b})`;
        }

        // Add event listeners for all color inputs
        ['temp1', 'temp2', 'temp3', 'temp4'].forEach((prefix, i) => {
            const swatches = ['swatch-cool', 'swatch-warm', 'swatch-hot', 'swatch-critical'];
            ['r', 'g', 'b'].forEach(c => {
                document.getElementById(`${prefix}-${c}`).addEventListener('input', () => {
                    updateColorSwatch(swatches[i], `${prefix}-r`, `${prefix}-g`, `${prefix}-b`);
                });
            });
        });

        ['bar-bg', 'bar-border', 'font-temp', 'font-label'].forEach((prefix) => {
            const swatches = {
                'bar-bg': 'swatch-bar-bg',
                'bar-border': 'swatch-bar-border',
                'font-temp': 'swatch-temp-text',
                'font-label': 'swatch-label-text'
            };
            ['r', 'g', 'b'].forEach(c => {
                document.getElementById(`${prefix}-${c}`).addEventListener('input', () => {
                    updateColorSwatch(swatches[prefix], `${prefix}-r`, `${prefix}-g`, `${prefix}-b`);
                });
            });
        });

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type + ' show';
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Generate config.ini content
        function generateConfigIni() {
            return `# CoolerDash Configuration - Generated by UI
# Restart required: sudo systemctl restart cc-plugin-coolerdash.service

[daemon]
address=${document.getElementById('daemon-address').value}
password=${document.getElementById('daemon-password').value}

[display]
mode=${document.getElementById('display-mode-select').value}
circle_switch_interval=${document.getElementById('circle-interval').value}
refresh_interval=${document.getElementById('refresh-interval').value}
brightness=${document.getElementById('brightness').value}
orientation=${document.getElementById('orientation').value}
width=${document.getElementById('width').value}
height=${document.getElementById('height').value}
shape=${document.getElementById('display-shape').value}

[layout]
bar_height=${document.getElementById('bar-height').value}
bar_width=${document.getElementById('bar-width').value}
bar_gap=${document.getElementById('bar-gap').value}
bar_border=${document.getElementById('bar-border').value}

[bar_color_background]
r=${document.getElementById('bar-bg-r').value}
g=${document.getElementById('bar-bg-g').value}
b=${document.getElementById('bar-bg-b').value}

[bar_color_border]
r=${document.getElementById('bar-border-r').value}
g=${document.getElementById('bar-border-g').value}
b=${document.getElementById('bar-border-b').value}

[font]
font_face=${document.getElementById('font-face').value}
font_size_temp=${document.getElementById('font-size-temp').value}
font_size_labels=${document.getElementById('font-size-label').value}

[font_color_temp]
r=${document.getElementById('font-temp-r').value}
g=${document.getElementById('font-temp-g').value}
b=${document.getElementById('font-temp-b').value}

[font_color_label]
r=${document.getElementById('font-label-r').value}
g=${document.getElementById('font-label-g').value}
b=${document.getElementById('font-label-b').value}

[temperature]
temp_threshold_1=${document.getElementById('temp-threshold-1').value}
temp_threshold_2=${document.getElementById('temp-threshold-2').value}
temp_threshold_3=${document.getElementById('temp-threshold-3').value}

[temp_threshold_1_bar]
r=${document.getElementById('temp1-r').value}
g=${document.getElementById('temp1-g').value}
b=${document.getElementById('temp1-b').value}

[temp_threshold_2_bar]
r=${document.getElementById('temp2-r').value}
g=${document.getElementById('temp2-g').value}
b=${document.getElementById('temp2-b').value}

[temp_threshold_3_bar]
r=${document.getElementById('temp3-r').value}
g=${document.getElementById('temp3-g').value}
b=${document.getElementById('temp3-b').value}

[temp_threshold_4_bar]
r=${document.getElementById('temp4-r').value}
g=${document.getElementById('temp4-g').value}
b=${document.getElementById('temp4-b').value}
`;
        }

        // Save config
        function saveConfig() {
            const config = generateConfigIni();
            const blob = new Blob([config], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'config.ini';
            a.click();
            URL.revokeObjectURL(url);
            showToast('üíæ Configuration downloaded! Copy to /etc/coolercontrol/plugins/coolerdash/', 'success');
        }

        // Reset config to defaults
        function resetConfig() {
            if (confirm('Reset all settings to default values?')) {
                document.getElementById('daemon-address').value = 'http://localhost:11987';
                document.getElementById('daemon-password').value = '';
                document.getElementById('display-mode-select').value = 'dual';
                document.getElementById('circle-interval').value = '5';
                document.getElementById('refresh-interval').value = '2.5';
                document.getElementById('brightness').value = '80';
                brightnessDisplay.textContent = '80%';
                document.getElementById('orientation').value = '0';
                document.getElementById('display-shape').value = 'auto';
                document.getElementById('width').value = '240';
                document.getElementById('height').value = '240';
                showToast('‚Ü∫ Settings reset to defaults', 'warning');
            }
        }

        // Modal functions
        function showRestartModal() {
            document.getElementById('restart-modal').classList.add('show');
        }

        function hideRestartModal() {
            document.getElementById('restart-modal').classList.remove('show');
        }

        function copyRestartCommand() {
            navigator.clipboard.writeText('sudo systemctl restart cc-plugin-coolerdash.service');
            showToast('üìã Command copied to clipboard!', 'success');
            hideRestartModal();
        }

        function copyCommand(elementId) {
            const cmd = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(cmd);
            showToast('üìã Command copied!', 'success');
        }

        // Display mode change handler
        document.getElementById('display-mode-select').addEventListener('change', (e) => {
            document.getElementById('display-mode').textContent = 
                e.target.value === 'dual' ? 'Dual' : 'Circle';
        });

        // Refresh interval change handler
        document.getElementById('refresh-interval').addEventListener('change', (e) => {
            document.getElementById('refresh-rate').textContent = e.target.value + 's';
        });

        // Close modal on outside click
        document.getElementById('restart-modal').addEventListener('click', (e) => {
            if (e.target.id === 'restart-modal') {
                hideRestartModal();
            }
        });

        // Initialize version from file if available
        // In a real deployment, this would be read from the VERSION file
        const version = '2.0.4';
        document.getElementById('version').textContent = 'v' + version;
        document.getElementById('info-version').textContent = version;
    </script>
</body>
</html>
